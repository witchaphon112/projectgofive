<div class="relative inline-block text-left" [class.z-50]="isOpen()">
  
  <button (click)="toggleDropdown()" 
          class="flex items-center text-bold hover:bg-gray-100 py-2 px-3 rounded-lg text-sm font-medium text-gray-600 transition-colors focus:outline-none">
    <span>Saved search</span>
    <mat-icon class="ml-1 mt-1 text-[12px] !w-4 !h-4 leading-none flex items-center justify-center overflow-hidden transition-transform duration-200"
              [class.rotate-180]="isOpen()">
      keyboard_arrow_down
    </mat-icon>
  </button>

  @if (isOpen()) {
    <div (click)="isOpen.set(false)" class="fixed inset-0 z-[40] bg-transparent cursor-default"></div>
  }

  @if (isOpen()) {
    <div class="absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-100 z-[50] py-1 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200">
      
      <div class="px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider border-b border-gray-50 bg-gray-50/50">
        My Filters
      </div>

      @for (item of availableSearches(); track item.id) {
        <button (click)="selectSearch(item)"
                class="block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 hover:text-[#0794FF] transition-colors border-l-4 border-transparent hover:border-[#0794FF] group relative z-[60]">
          <div class="flex items-center justify-between">
            <span>{{ item.label }}</span>
            <mat-icon class="!w-4 !h-4 text-[16px] opacity-0 group-hover:opacity-100 transition-opacity text-[#0794FF]">arrow_forward</mat-icon>
          </div>
        </button>
      }

      @if (availableSearches().length === 0) {
        <div class="px-4 py-6 text-sm text-gray-400 text-center flex flex-col items-center">
          <mat-icon class="text-gray-300 mb-2">search_off</mat-icon>
          No saved searches
        </div>
      }

    </div>
  }

</div>